<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project SEKAI - MySekai Xray</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="js/config.js"></script>
</head>
<body>
    <!-- Drop Zone Modal -->
    <div class="drop-zone-backdrop hidden" id="dropZoneBackdrop">
        <div class="drop-zone" id="dropZone">
            <button class="drop-zone-close" onclick="closeDropZoneModal()">‚úï</button>
            <div class="drop-zone-content">
                <div class="drop-icon">üìÅ</div>
                <h2>Load Data File</h2>
                <div class="drop-hint">Drag & drop your JSON file here</div>
                <div class="or-text">or</div>
                <button class="file-input-button" onclick="document.getElementById('hiddenFileInput').click()">
                    Browse Files
                </button>
            </div>
        </div>
    </div>
    <input type="file" id="hiddenFileInput" />

    <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
    <div class="sidebar-overlay" onclick="closeSidebar()" id="sidebarOverlay"></div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Controls</h2>
            <button class="sidebar-close" onclick="closeSidebar()">‚úï</button>
        </div>
        <div class="sidebar-content" id="sidebarContent">
        </div>
    </div>

    <div class="container">
        <div class="image-container">
            <img alt="Scene background" id="image">
            <canvas class="grid-canvas" id="gridCanvas"></canvas>
        </div>
    </div>

    <div class="item-summary" id="itemSummary"></div>

    <div class="controls">
        <div class="scene-buttons">
            <button onclick="selectScene('scene1')" data-scene="scene1">„Åï„ÅÑ„Åó„Çá„ÅÆÂéü„Å£„Å±</button>
            <button onclick="selectScene('scene2')" data-scene="scene2">ÂΩ©„Çä„ÅÆËä±Áïë</button>
            <button onclick="selectScene('scene3')" data-scene="scene3">È°ò„ÅÑ„ÅÆÁ†ÇÊµú</button>
            <button onclick="selectScene('scene4')" data-scene="scene4">Âøò„ÇåÂéª„Çâ„Çå„ÅüÂ†¥ÊâÄ</button>
        </div>
        <br>
        <button class="filter-button" onclick="openDropZoneModal()">üì§ Load Data File</button>
        <button class="filter-button" onclick="toggleFilterPanel()">üîç Filter Items</button>


        <div class="filter-panel" id="filterPanel">
            <div class="filter-options">
                <div class="filter-option">
                    <input type="radio" id="filterAll" name="filterMode" value="all" checked onchange="changeFilterMode()">
                    <label for="filterAll">Show All Items</label>
                </div>
                <div class="filter-option">
                    <input type="radio" id="filterRare" name="filterMode" value="rare" onchange="changeFilterMode()">
                    <label for="filterRare">Show Rare Items Only</label>
                </div>
                <div class="filter-option">
                    <input type="radio" id="filterCustom" name="filterMode" value="custom" onchange="changeFilterMode()">
                    <label for="filterCustom">Show Custom Selected Items</label>
                </div>
            </div>
            <div id="itemCheckboxContainer" class="item-checkbox-list"></div>
        </div>
        <br><br>
        <div class="log-container" id="logContainer"></div>
        <br>
        <details>
            <summary>Advance Settings</summary>
            <label for="physicalWidth">Grid Width(px):</label>
            <input type="number" id="physicalWidth" value="10" min="1" step="1">
            <label for="offsetX">X Offset(px):</label>
            <input type="number" id="offsetX" value="0" step="1">
            <label for="offsetY">Y Offset(px):</label>
            <input type="number" id="offsetY" value="0" step="1">
            <button onclick="drawGrid()">Draw Grid</button>
            <button onclick="clearGrid()">Clear Canvas</button>
            <br>
            <div class="direction-buttons">
                <button onclick="setDirection('x+', 'y+')">X+ Y+</button>
                <button onclick="setDirection('x+', 'y-')">X+ Y-</button>
                <button onclick="setDirection('x-', 'y+')">X- Y+</button>
                <button onclick="setDirection('x-', 'y-')">X- Y-</button>
            </div>
        </details>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
